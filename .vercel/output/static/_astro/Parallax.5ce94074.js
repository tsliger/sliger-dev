import{r as h}from"./index.a2555fc4.js";import{j as B}from"./jsx-runtime.39e0017a.js";import{c as z,d as m,M as V,e as C,u as R,g as T,h as v,p as I,v as Y,j as k,f as j,w as X,m as D}from"./motion.c6af6f1b.js";import{r as G}from"./Box.915bd525.js";function F(e){const t=z(()=>m(e)),{isStatic:o}=h.useContext(V);if(o){const[,n]=h.useState(e);h.useEffect(()=>t.on("change",n),[])}return t}const N=e=>typeof e=="object"&&e.mix,_=e=>N(e)?e.mix:void 0;function U(...e){const t=!Array.isArray(e[0]),o=t?0:-1,n=e[0+o],s=e[1+o],r=e[2+o],i=e[3+o],l=C(s,r,{mixer:_(r[0]),...i});return t?l(n):l}function $(e,t){const o=F(t()),n=()=>o.set(t());return n(),R(()=>{const s=()=>v.update(n,!1,!0),r=e.map(i=>i.on("change",s));return()=>{r.forEach(i=>i()),T(n)}}),o}function q(e,t,o,n){const s=typeof t=="function"?t:U(t,o,n);return Array.isArray(e)?S(e,s):S([e],([r])=>s(r))}function S(e,t){const o=z(()=>[]);return $(e,()=>{o.length=0;const n=e.length;for(let s=0;s<n;s++)o[s]=e[s].get();return t(o)})}const y=new WeakMap;let d;function J(e,t){if(t){const{inlineSize:o,blockSize:n}=t[0];return{width:o,height:n}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function K({target:e,contentRect:t,borderBoxSize:o}){var n;(n=y.get(e))===null||n===void 0||n.forEach(s=>{s({target:e,contentSize:t,get size(){return J(e,o)}})})}function Q(e){e.forEach(K)}function Z(){typeof ResizeObserver>"u"||(d=new ResizeObserver(Q))}function ee(e,t){d||Z();const o=G(e);return o.forEach(n=>{let s=y.get(n);s||(s=new Set,y.set(n,s)),s.add(t),d?.observe(n)}),()=>{o.forEach(n=>{const s=y.get(n);s?.delete(t),s?.size||d?.unobserve(n)})}}const E=new Set;let w;function te(){w=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};E.forEach(o=>o(t))},window.addEventListener("resize",w)}function ne(e){return E.add(e),w||te(),()=>{E.delete(e),!E.size&&w&&(w=void 0)}}function se(e,t){return typeof e=="function"?ne(e):ee(e,t)}const oe=50,W=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),re=()=>({time:0,x:W(),y:W()}),ie={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function O(e,t,o,n){const s=o[t],{length:r,position:i}=ie[t],l=s.current,u=o.time;s.current=e["scroll"+i],s.scrollLength=e["scroll"+r]-e["client"+r],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=I(0,s.scrollLength,s.current);const c=n-u;s.velocity=c>oe?0:Y(s.current-l,c)}function le(e,t,o){O(e,"x",t,o),O(e,"y",t,o),t.time=o}function ce(e,t){let o={x:0,y:0},n=e;for(;n&&n!==t;)if(n instanceof HTMLElement)o.x+=n.offsetLeft,o.y+=n.offsetTop,n=n.offsetParent;else if(n instanceof SVGGraphicsElement&&"getBBox"in n){const{top:s,left:r}=n.getBBox();for(o.x+=r,o.y+=s;n&&n.tagName!=="svg";)n=n.parentNode}return o}const fe={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},L={start:0,center:.5,end:1};function A(e,t,o=0){let n=0;if(L[e]!==void 0&&(e=L[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?n=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?n=s/100*document.documentElement.clientWidth:e.endsWith("vh")?n=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(n=t*e),o+n}const ue=[0,0];function ae(e,t,o,n){let s=Array.isArray(e)?e:ue,r=0,i=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,L[e]?e:"0"]),r=A(s[0],o,n),i=A(s[1],t),r-i}const de={x:0,y:0};function he(e,t,o){let{offset:n=fe.All}=o;const{target:s=e,axis:r="y"}=o,i=r==="y"?"height":"width",l=s!==e?ce(s,e):de,u=s===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:s.clientWidth,height:s.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let a=!t[r].interpolate;const g=n.length;for(let f=0;f<g;f++){const H=ae(n[f],c[i],u[i],l[r]);!a&&H!==t[r].interpolatorOffsets[f]&&(a=!0),t[r].offset[f]=H}a&&(t[r].interpolate=C(t[r].offset,k(n)),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=t[r].interpolate(t[r].current)}function ge(e,t=e,o){if(o.x.targetOffset=0,o.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)o.x.targetOffset+=n.offsetLeft,o.y.targetOffset+=n.offsetTop,n=n.offsetParent}o.x.targetLength=t===e?t.scrollWidth:t.clientWidth,o.y.targetLength=t===e?t.scrollHeight:t.clientHeight,o.x.containerLength=e.clientWidth,o.y.containerLength=e.clientHeight}function pe(e,t,o,n={}){return{measure:()=>ge(e,n.target,o),update:s=>{le(e,o,s),(n.offset||n.target)&&he(e,o,n)},notify:()=>t(o)}}const p=new WeakMap,b=new WeakMap,x=new WeakMap,M=e=>e===document.documentElement?window:e;function me(e,{container:t=document.documentElement,...o}={}){let n=x.get(t);n||(n=new Set,x.set(t,n));const s=re(),r=pe(t,e,s,o);if(n.add(r),!p.has(t)){const l=()=>{for(const f of n)f.measure()},u=()=>{for(const f of n)f.update(j.timestamp)},c=()=>{for(const f of n)f.notify()},a=()=>{v.read(l,!1,!0),v.update(u,!1,!0),v.update(c,!1,!0)};p.set(t,a);const g=M(t);window.addEventListener("resize",a,{passive:!0}),t!==document.documentElement&&b.set(t,se(t,a)),g.addEventListener("scroll",a,{passive:!0})}const i=p.get(t);return v.read(i,!1,!0),()=>{var l;T(i);const u=x.get(t);if(!u||(u.delete(r),u.size))return;const c=p.get(t);p.delete(t),c&&(M(t).removeEventListener("scroll",c),(l=b.get(t))===null||l===void 0||l(),window.removeEventListener("resize",c))}}function P(e,t){X(!!(!t||t.current))}const ve=()=>({scrollX:m(0),scrollY:m(0),scrollXProgress:m(0),scrollYProgress:m(0)});function we({container:e,target:t,layoutEffect:o=!0,...n}={}){const s=z(ve);return(o?R:h.useEffect)(()=>(P("target",t),P("container",e),me(({x:i,y:l})=>{s.scrollX.set(i.current),s.scrollXProgress.set(i.progress),s.scrollY.set(l.current),s.scrollYProgress.set(l.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0})),[]),s}const ze=({children:e,offset:t=50})=>{const[o,n]=h.useState(0),[s,r]=h.useState(0),i=h.useRef(null),{scrollY:l}=we(),u=o-s,c=o+t,a=q(l,[u,c],[t,-t]);return h.useEffect(()=>{const g=i.current;(()=>{n(g.getBoundingClientRect().top+window.scrollY||window.pageYOffset),r(window.innerHeight)})()},[i]),B.jsx(D.div,{ref:i,style:{y:a},children:e})};export{ze as P,we as a,F as u};
