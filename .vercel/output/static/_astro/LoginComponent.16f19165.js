import{r as s}from"./index.94c7be44.js";import{k as h}from"./index.cf5ec451.js";import{u as x}from"./index.modern.57eec9fd.js";import{L as g}from"./Loading.69afd91c.js";import{u as w}from"./index.280efa68.js";import{j as c}from"./jwtStore.d3a856e6.js";import{j as e}from"./jsx-runtime.2cd341a3.js";function k(){const[a,n]=s.useState({identifier:void 0,password:void 0}),[i,r]=s.useState(!1),[m,u]=s.useState(""),l=s.useRef(null),d=w(c),{isExpired:p}=x(d);d&&!p&&setTimeout(()=>window.location.href="/dashboard",300);const f=async t=>{r(!0);try{const o=await h.post("http://localhost:1337/api/auth/local",{json:a}).json();c.set(o.jwt),setTimeout(()=>{r(!1),window.location.href="/dashboard"},1e3)}catch(o){o.name==="HTTPError"&&(await o.response.json(),u("Could not validate credentials"),setTimeout(()=>{r(!1)},1e3))}l.current.reset()};return e.jsx("div",{className:"bg-gradient-to-bl shadow-xl hover:shadow-lg duration-300 transition from-[#FFFFFF]/20 from-10%  to-black/20 rounded-lg w-96 h-96 py-8 relative",children:e.jsxs("form",{ref:l,onSubmit:t=>t.preventDefault(),className:"space-y-8 flex items-center flex-col",children:[e.jsx("img",{draggable:!1,className:"select-none invert w-32 absolute top-8",src:"/sliger-warped-logo.svg",alt:""}),e.jsx("span",{className:"text-red-500 text-sm h-2 translate-y-8",children:m}),e.jsx("div",{className:"h-1"}),e.jsx("input",{type:"email",onChange:t=>n({...a,identifier:t.currentTarget.value}),className:"input-field",placeholder:"Email"}),e.jsx("input",{onChange:t=>n({...a,password:t.currentTarget.value}),className:"input-field",placeholder:"Password",type:"password"}),e.jsxs("button",{onClick:f,className:"text-[#FFE6C7]  p-3 text-xs font-mono border-2 border-black/20 font-bold rounded-xl shadow-lg active:shadow-none active:scale-95 duration-150 transition grid-items-center",children:[i&&e.jsx(g,{}),!i&&e.jsx("p",{children:"Log in"})]})]})})}export{k as default};
