import{k as c}from"./index.cf5ec451.js";import{r as x}from"./index.94c7be44.js";import{L as p}from"./Loading.69afd91c.js";import{j as e}from"./jsx-runtime.2cd341a3.js";import{F as u}from"./formik.esm.458d0a3d.js";import{u as h}from"./index.280efa68.js";import{j as b}from"./jwtStore.d3a856e6.js";function j({isSubmitting:a}){return e.jsxs("button",{type:"submit",className:"text-[#FFE6C7] h-16 my-8  p-3 text-xs font-mono border-2 border-black/20 font-bold rounded-xl w-48 grid place-items-center mx-auto shadow-lg active:shadow-none active:scale-95 duration-150 transition grid-items-center",children:[a&&e.jsx(p,{}),!a&&e.jsx("p",{children:"Create Post"})]})}function T(){const[a,d]=x.useState(void 0),i=h(b);return e.jsx("div",{className:"w-[600px] mx-auto flex-grow flex flex-col items-center text-white",children:e.jsx(u,{initialValues:{title:"",excerpt:"",content:"",categories:"",authors:""},onSubmit:async(r,{setSubmitting:m})=>{const l=new FormData;l.append("files",a);try{var t=await c.post("http://localhost:1337/api/upload",{body:l,headers:{Authorization:`Bearer ${i}`}}).json()}catch(s){s.name==="HTTPError"&&await s.response.json()}if(t){const s=t[0].id;try{const o=await c.post("http://localhost:1337/api/posts",{json:{data:{title:r.title,excerpt:r.excerpt,content:r.content,visible:!0,categories:{id:1},author:{id:1},featured_image:{id:s}}},headers:{Authorization:`Bearer ${i}`}}).json();m(!1);const n=o.data.attributes.slug;n&&(window.location.href="/blog/"+n)}catch(o){o.name==="HTTPError"&&await o.response.json()}}},children:({values:r,errors:m,touched:l,handleChange:t,handleBlur:s,handleSubmit:o,isSubmitting:n})=>e.jsxs("form",{onSubmit:o,className:"flex flex-col w-[400px]",children:[e.jsx("label",{htmlFor:"n/a",className:"my-2 font-semibold font-mono",children:"Banner Image"}),e.jsx("label",{htmlFor:"file",className:"cursor-pointer text-[#FFE6C7]  p-3 text-xs font-mono border-2 border-black/20 font-bold rounded-xl shadow-lg active:shadow-none my-2 duration-150 transition grid-items-center",children:"Click To Add Image"}),e.jsx("input",{id:"file",type:"file",name:"file",className:"hidden",onChange:f=>{d(f.target.files[0])}}),e.jsx("label",{htmlFor:"title",className:"my-2 font-semibold font-mono",children:"Title"}),e.jsx("input",{name:"title",className:"input-field mb-4 w-full",onChange:t}),e.jsx("label",{htmlFor:"excerpt",className:"my-2 font-semibold font-mono",children:"Excerpt"}),e.jsx("textarea",{name:"excerpt",className:"input-field mb-4 py-2 resize-none h-32 w-full",onChange:t}),e.jsx("label",{htmlFor:"content",className:"my-2 font-semibold font-mono",children:"Content"}),e.jsx("textarea",{name:"content",className:"input-field mb-4 py-2 resize-none h-96 w-full",onChange:t}),e.jsx("label",{htmlFor:"categories",className:"my-2 font-semibold font-mono",children:"Categories"}),e.jsx("select",{name:"categories",className:"input-field mb-4 py-2 resize-none w-full",onChange:t}),e.jsx("label",{htmlFor:"authors",className:"my-2 font-semibold font-mono",children:"Author(s)"}),e.jsx("select",{name:"authors",className:"input-field mb-4 py-2 resize-none w-full",onChange:t}),e.jsx(j,{isSubmitting:n})]})})})}export{T as default};
